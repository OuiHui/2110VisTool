<!DOCTYPE html>
<html>
<head>
  <style>
    .component {
      fill: #f0f0f0;
      stroke: #333;
      stroke-width: 2;
    }
    
    .wire {
      stroke: #666;
      stroke-width: 2;
      fill: none;
    }
    
    .wire.active {
      stroke: red;
      animation: pulse 1s infinite;
    }
    
    .wire-label {
      font-size: 12px;
      fill: #333;
    }
    
    .component-label {
      font-size: 14px;
      fill: #333;
      text-anchor: middle;
      dominant-baseline: middle;
    }
    
    @keyframes pulse {
      0% { stroke-opacity: 1; }
      50% { stroke-opacity: 0.5; }
      100% { stroke-opacity: 1; }
    }

    .control-panel {
      position: fixed;
      top: 20px;
      right: 20px;
      padding: 10px;
      background: white;
      border: 1px solid #ccc;
      border-radius: 5px;
    }

    button {
      padding: 5px 10px;
      margin: 5px;
      background: #4CAF50;
      color: white;
      border: none;
      border-radius: 3px;
      cursor: pointer;
    }

    button:hover {
      background: #45a049;
    }

    .dropdown-container {
            display: inline-block;
        }

        .dropdown-label {
            display: block;
            margin-bottom: 8px;
            font-size: 14px;
            font-weight: 500;
            color: #374151;
        }

        .dropdown-button {
            width: 192px; /* equivalent to w-48 */
            padding: 8px 16px;
            background: white;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            text-align: left;
            position: relative;
            cursor: pointer;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
        }

        .dropdown-button:focus {
            outline: none;
        }

        .dropdown-content {
            display: none;
            position: absolute;
            width: 192px;
            margin-top: 4px;
            background: white;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            z-index: 10;
        }

        .dropdown-content.show {
            display: block;
        }

        .dropdown-item {
            padding: 8px 16px;
            cursor: pointer;
        }

        .dropdown-item:hover {
            background: #eff6ff;
        }

  </style>
</head>
<body>
  <svg width="1200" height="800" viewBox="0 0 1200 800">
    <!-- Main Components -->
    
    <!-- PC -->
    <rect class="component" x="50" y="100" width="100" height="60"/>
    <text class="component-label" x="100" y="130">PC</text>
    
    <!-- PC MUX -->
    <path class="component" d="M200 80 L250 110 L250 150 L200 180 Z"/>
    <text class="component-label" x="225" y="130">MUX</text>
    
    <!-- MAR -->
    <rect class="component" x="300" y="100" width="100" height="60"/>
    <text class="component-label" x="350" y="130">MAR</text>
    
    <!-- Memory -->
    <rect class="component" x="450" y="100" width="120" height="100"/>
    <text class="component-label" x="510" y="150">Memory</text>
    
    <!-- MDR -->
    <rect class="component" x="620" y="100" width="100" height="60"/>
    <text class="component-label" x="670" y="130">MDR</text>
    
    <!-- IR -->
    <rect class="component" x="300" y="250" width="100" height="60"/>
    <text class="component-label" x="350" y="280">IR</text>
    
    <!-- Register File -->
    <rect class="component" x="450" y="250" width="120" height="100"/>
    <text class="component-label" x="510" y="300">Registers</text>
    
    <!-- ALU -->
    <path class="component" d="M620 250 L720 250 L670 350 Z"/>
    <text class="component-label" x="670" y="300">ALU</text>

    <!-- Wires -->
    <!-- PC to MUX -->
    <path class="wire" id="pc-to-mux" 
          d="M150 130 H200"/>
    
    <!-- MUX to MAR -->
    <path class="wire" id="mux-to-mar"
          d="M250 130 H300"/>
    
    <!-- MAR to Memory -->
    <path class="wire" id="mar-to-memory"
          d="M400 130 H450"/>
    
    <!-- Memory to MDR -->
    <path class="wire" id="memory-to-mdr"
          d="M570 130 H620"/>
    
    <!-- MDR to Bus -->
    <path class="wire" id="mdr-to-bus"
          d="M670 160 V200 H100 V350"/>
    
    <!-- Main Bus (Horizontal) -->
    <path class="wire" id="main-bus"
          d="M50 350 H750"/>
    
    <!-- Bus to Register File -->
    <path class="wire" id="bus-to-reg"
          d="M510 350 V350"/>
    
    <!-- Register to ALU -->
    <path class="wire" id="reg-to-alu"
          d="M570 300 H620"/>
    
    <!-- ALU to Bus -->
    <path class="wire" id="alu-to-bus"
          d="M670 350 V350"/>

    <!-- Control Signals -->
    <path class="wire" id="ld-mar" 
          d="M350 80 V100"
          stroke-dasharray="4"/>
    <text class="wire-label" x="360" y="90">LD.MAR</text>
    
    <path class="wire" id="ld-mdr"
          d="M670 80 V100"
          stroke-dasharray="4"/>
    <text class="wire-label" x="680" y="90">LD.MDR</text>
    
    <path class="wire" id="ld-ir"
          d="M350 230 V250"
          stroke-dasharray="4"/>
    <text class="wire-label" x="360" y="240">LD.IR</text>
    
    <path class="wire" id="ld-reg"
          d="M510 230 V250"
          stroke-dasharray="4"/>
    <text class="wire-label" x="520" y="240">LD.REG</text>
  </svg>

  <div class="control-panel">
    <button onclick="activateWire('pc-to-mux')">PC → MUX</button>
    <button onclick="activateWire('mux-to-mar')">MUX → MAR</button>
    <button onclick="activateWire('mar-to-memory')">MAR → Memory</button>
    <button onclick="activateWire('memory-to-mdr')">Memory → MDR</button>
    <button onclick="activateWire('mdr-to-bus')">MDR → Bus</button>
    <button onclick="startFetchCycle()">Start Fetch Cycle</button>
  </div>
  <div class="dropdown-container">
    <label class="dropdown-label" for="dropdown">Instruction</label>
    <button id="dropdown" class="dropdown-button">Select an option</button>
    <div id="dropdown-content" class="dropdown-content">
        <div class="dropdown-item">Option 1</div>
        <div class="dropdown-item">Option 2</div>
        <div class="dropdown-item">Option 3</div>
    </div>
</div>

  <script>
    function activateWire(wireId) {
      // Reset all wires
      document.querySelectorAll('.wire').forEach(wire => {
        wire.classList.remove('active');
      });
      
      // Activate selected wire
      document.getElementById(wireId).classList.add('active');
    }

    function startFetchCycle() {
      const sequence = [
        'pc-to-mux',
        'mux-to-mar',
        'mar-to-memory',
        'memory-to-mdr',
        'mdr-to-bus'
      ];

      sequence.forEach((wireId, index) => {
        setTimeout(() => {
          activateWire(wireId);
        }, index * 1000);
      });
    }
    const dropdownButton = document.getElementById('dropdown');
    const content = document.getElementById('dropdown-content');
    const items = document.querySelectorAll('.dropdown-item');

        // Toggle dropdown when button is clicked
        dropdownButton.addEventListener('click', () => {
            content.classList.toggle('show');
        });

        // Close dropdown when clicking outside
        window.addEventListener('click', (event) => {
            if (!event.target.matches('.dropdown-button')) {
                if (content.classList.contains('show')) {
                    content.classList.remove('show');
                }
            }
        });

        // Handle item selection
        items.forEach(item => {
            item.addEventListener('click', () => {
                dropdownButton.textContent = item.textContent;
                content.classList.remove('show');
            });
        });
    </script>
</body>
</html>
